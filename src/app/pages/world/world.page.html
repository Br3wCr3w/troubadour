<div class="game-container">
    <app-battle-map></app-battle-map>

    <!-- Left Sidebar: Party -->
    <app-party-sidebar [party]="(party$ | async) || []" [playerCharacter]="playerCharacter"
        (openPlayerPopup)="openPlayerPopup()">
    </app-party-sidebar>

    <!-- Bottom Left: Chat -->
    <app-chat [chatMessages$]="chatMessages$" [chatError]="chatError" (sendMessage)="onSendMessage($event)">
    </app-chat>

    <!-- Bottom Right: Actions -->
    <app-game-actions></app-game-actions>

    <!-- Player Stats Popup -->
    <app-player-edit-popup *ngIf="showPlayerPopup" [playerCharacter]="playerCharacter"
        (save)="onSavePlayerStats($event)" (cancel)="closePlayerPopup()">
    </app-player-edit-popup>
</div>